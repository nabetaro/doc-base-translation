doc-base (0.8.9) unstable; urgency=low

  * Fix typos in doc-base.map (closes: #460505).
  * Update sections in scrollkeeper.map.

 -- Robert Luberda <robert@debian.org>  Sun, 27 Jan 2008 13:36:37 +0100

doc-base (0.8.8) unstable; urgency=low

  * Remove /var/lib/doc-base on package removal (closes: #454069).
  * Strip  Apps and Applicatons prefixes from Section field values.
  * Enable dhelp registation, conflicts with dhelp << 0.6.5.
  * Standards-Version: 3.7.3 (no changes).

 -- Robert Luberda <robert@debian.org>  Sat, 22 Dec 2007 13:22:11 +0100

doc-base (0.8.7) unstable; urgency=low

  * Introduce /var/lib/doc-base/documents and dynamic generation of files
    there in doc-base control file format.  Interfaces like dhelp, dwww,
    or doc-central should use that dir instead  of /usr/share/doc.
  * Add support for merging control files to allow multiple binary packages
    provide the same documentation but in different formats.
  * Try to standarize values of the Section: field.
  * Add /etc/doc-base/documents in order to made it possible to register
    local documents with doc-base  (closes: #213847).

  * Dhelp.pm:
    + don't generate .dhelp files, since dhelp 0.6 no longer supports them.
    + add a code to register/unregister doc-base control files with dhelp,
      but not enable it yet.

  * postinst: Remove all already generated .dhelp files and reregister
    installed documentation files.
  * Documentation update.

 -- Robert Luberda <robert@debian.org>  Sun, 02 Dec 2007 14:18:25 +0100

doc-base (0.8.6) unstable; urgency=low

  * Rewrite Dhelp.pm to improve performance and minimise number dhelp_parse
    calls, which after its reimplementation in Ruby started to be extremally
    slow (it took `install-docs -I' ages to finish). Now, dhelp_parse will
    be called at most two times in each install-docs invokation.
  * Use 3-args open(), and also quote fields' values in our status file in
    order not to fail on control files containing spaces (closes: #444889).
  * Implement more checks of doc-base files, like unknown fields, duplicated
    fields, fields in wrong sections (closes: #423120). Turn them into
    warnings, since if they are errors, too many packages will fail to
    install.
  * Document.pm: try to minimise number of write_status_file() calls.
  * Ignore SIGINT and some other signals while doing critical operations.
  * Scrollkeeper.pm: scrollkeeper doesn't like `&' character (see bug#429847),
    replace it with `(and)'.
  * More code refactoring, but still not finished: use prototypes, fix typos,
    standarize messages, etc.

 -- Robert Luberda <robert@debian.org>  Sun, 28 Oct 2007 12:00:37 +0100

doc-base (0.8.5) unstable; urgency=low

  * DocBaseFile.pm: don't die() on invalid doc-base files (closes: #425686).
  * Fix a typo in Dhelp.pm.
  * Document the Author field (closes: #427794).

 -- Robert Luberda <robert@debian.org>  Tue, 17 Jul 2007 00:47:07 +0200

doc-base (0.8.4) unstable; urgency=low

  * Split install-docs into modules to make the code more manageable.
  * Try to avoid bugs like #278495: if our modules can't be loaded when
    (de)registering documentation files, create special flag file and
    reregister all the documents after install-docs is usable again.
  * Add support for (de)registering multiple documents in one install-docs
    invokation (closes: #114692).
  * Add --check/-c option to install-docs (closes: #35895), also add --rootdir
    option.
  * Remove `Registered-to-XXX' statuses, remove *.list files, deprecate the
    -L/--listfiles option. Names of the generated files are now keep in
    the status file in `Scrollkeeper-omf-files' and `Dhelp-files'  fields.
  * Change semantics of -r/--remove option: its arguments should be the names
    of previously installed doc-base files, and not the documents IDs. Still
    support the old semantics for backward compatibility.
  * Introduce -I/--install-all, -R/--remove-all, -d/--debug, -h/--help options.

  * Change the build system, create Makefile and let it do all the work.

  * doc-base.sgml:
    + Update outuput of --status, remove reference to --listfiles.
    + Add chapter about checking syntax of control files.
    + Update syntax of --remove option.

  * Dhelp support:
    + Pass a list of all registered files to dhelp (closes: #128493).
    + Create dhelp files only in top-level documentation dirs
      (i.e. /usr/share/doc/$package instead of /u/s/d/$package/something).
      According to dhelp's documentation this is the right thing to do.
      Also this should avoid problems with symlinks like #21678.
    + Add a special `x-doc-base-id' tag to generated dhelp files to make it
      possible to distinguish items in the dhelp files. When installing new
      documents existing files are no longer overwritten (closes: #204195),
      but on the other hand on documents removal the dhelp files may not be
      removed, which possibly reintroduces bugs like #59850.
    + Don't call dhelp_parse {-d,-a} on files that weren't changed.

  * Scrollkeeper support:
    + Fix broken non-empty directories check.
    + Save generated series id in `Scrollkeeper-sid' status field and use it
      for following registrations of the same document.
    + Call scrollkeeper-update only once in each invokation of install-docs.

  * Dwww support:
    + skip running update-menus if dwww package doesn't seem to be installed.

 -- Robert Luberda <robert@debian.org>  Sun, 06 May 2007 15:22:38 +0200

doc-base (0.8.3) unstable; urgency=low

  * prerm: Oops, the first letter from the `else' word went somehow 
    missing (closes: #419045).

 -- Robert Luberda <robert@debian.org>  Fri, 13 Apr 2007 19:40:06 +0200

doc-base (0.8.2) unstable; urgency=low

  * install-docs: yet another typo fixed.

 -- Robert Luberda <robert@debian.org>  Thu, 12 Apr 2007 21:40:07 +0200

doc-base (0.8.1) unstable; urgency=low

  * Fix a typo that cuased broken omf files being generated in some cases 
    (closes: #418861).

 -- Robert Luberda <robert@debian.org>  Thu, 12 Apr 2007 18:49:39 +0200

doc-base (0.8.0) unstable; urgency=low

  * Merge the scrollkeeper stuff from Ubuntu 0.7.21ubuntu2 (closes: #418412)
    with the following changes:
    + set omf dir to /var/lib/doc-base/omf and make it link from
       /usr/share/omf/doc-base;
    + try to register more formats in addition to html, both khelpcenter and
      yelp can handle them via external applications. Thanks to Sam Morris
      <sam+robots.org.uk> for the suggestion;
    + suggest yelp | khelpcenter as scrollkeeper browsers;
    + don't run scrollkeeper-update if --no-update-menus was passed to
      install-docs.

  * Improve the doc-base manual:
    + enhance the document layout, add some cross references;
    + remove the paragraph about automatic conversions between formats, it's
      not true, and won't be soon (unless someone provides me patch for this);
    + put an example of PDF and other supported formats (closes: #409121);
    + clarify allowable shell glob patterns (closes: #392587);
    + mention that the registered files should be located under /usr/share/doc
      hierarchy (closes: #333648);
    + review the TODO list, add some items I'd like to implement shortly.

  * postinst/postrm scripts:
    + do proper quoting of file names (closes: #395824);
    + reinstall_docs removes installed docs before re-registering them;
    + make the handling docs code from postrm match the postinst code;

  * install-docs:
    + `missing Index field for Info format' is an error now, not warning;
    + if glob() returns only one file, check for its existence. glob() seems
      to simply return its argument if it doesn't contain any meta-characters;
    + skip any doc-base files that contain Version: field, for future changes;
    + ignore `two many arguments' error for `-i' and `-r' options;

  * Move debhelper to Build-Depends (lintian)
  * Remove one useless lintian override and add two new ones ;)
  * Bump Standards-Version to 3.7.2.

 -- Robert Luberda <robert@debian.org>  Wed, 11 Apr 2007 22:41:28 +0200

doc-base (0.7.23) unstable; urgency=low

  * Oops, the previous change caused dhelp warnings about trying to create its
    .dhelp files in nonexistent directories. Fixed that.

 -- Robert Luberda <robert@debian.org>  Fri, 30 Mar 2007 23:19:59 +0200

doc-base (0.7.22) unstable; urgency=medium

  * Show warnings about nonexistent files only when in verbose mode
    (closes: #409186, #366250).

 -- Robert Luberda <robert@debian.org>  Fri, 30 Mar 2007 21:53:26 +0200

doc-base (0.7.21) unstable; urgency=low

  * doc-base.sgml:
    + bless a few documentation formats: PDF, PostScript, Info, and DVI,
      which are already often used in the doc-base files
    + the `Index' field is required for the Info format.
  * install-docs:
    + support the above mentioned formats
    + warn if info format lacks the `Index' field.
  * install-docs: Some fixes for dhelp support:
    + when registering the doc files, don't remove the old .dhelp file until
      it's actually read and parsed. This partially fixes Bug#204195 (the full
      fix would probably require not removing .dhelp files when doc-base documents
      are unregistered)
    + don't HTML-encode entries already read from .dhelp file
    + made 'howto' and 'faq' section names  uppercase.
  * debian/postinst: Re-register all the doc-base files.

 -- Robert Luberda <robert@debian.org>  Sun, 23 Apr 2006 17:48:08 +0200

doc-base (0.7.20) unstable; urgency=low

  * doc-base.sgml:
    + document common practice that value of `Files' field is a space
      separated list of filenames or glob patterns
    + also explicitly document the meaning of lines starting with two
      or more spaces
    + add the missing word (closes: #289448)
  * install-docs:
    + encode HTML special characters when generating the .dhelp files
      (closes: #114877)
    + correctly handle the verbatim text and blank line for the .dhelp files
    + warn if files referred by the doc-base files does not exist.
  * debian/postinst: Re-register all the doc-base files because of the above
    install-docs changes.
  * Remove ancient stuff from postinst & prerm scripts, remove preinst
    entirely.
  * Use `which' instead of`command -v' in the scripts (closes: #292967).
  * debian/copyright: update.
  * debian/control: suggest doc-central as an alternative to dhelp or dwww.
  * Ack NMU (closes: #278495).

 -- Robert Luberda <robert@debian.org>  Sun,  2 Apr 2006 14:26:47 +0200

doc-base (0.7.19) unstable; urgency=low

  * New maintainer (closes: #358436).
  * debian/*: Switch build-system do debhelper v5.
  * debian/postinst: Reorder arguments to invocation of find(1) command
    (closes: #309516).

 -- Robert Luberda <robert@debian.org>  Tue, 28 Mar 2006 19:58:06 +0200

doc-base (0.7.18-0.1) unstable; urgency=high

  * Non-maintainer upload.
  * High-urgency upload for sarge-targetted RC bugfix
  * Fix install-docs to not require perl's File::Basename, so that it
    works even when perl is unconfigured.  Thanks to Colin Watson for
    the patch.  Closes: #278495.

 -- Steve Langasek <vorlon@debian.org>  Thu, 12 May 2005 17:25:15 -0700

doc-base (0.7.18) unstable; urgency=low

  * postinst: don't die if /usr/lib/menu doesn't exist; closes: #186707

 -- Adam Di Carlo <aph@debian.org>  Sun, 30 Mar 2003 12:14:52 -0500

doc-base (0.7.17) unstable; urgency=low

  * new dwww changes: no longer produce files under /usr/lib/menu;
    obsoletes and closes: #153242; conflict with dwww < 1.9.0
  * on upgrade, remove the files /usr/lib/menu/doc-base-*
  * postinst should use stderr, not stdout
  * rewrite the description/synopsis
  * policy compliance updated to 3.5.9, no changes required
  * preinst: don't babble about removing dhelp files unless they are
    really there; let dhelp_parse_fsstnd fail if it wants to

 -- Adam Di Carlo <aph@debian.org>  Sun, 23 Mar 2003 16:28:15 -0500

doc-base (0.7.16) unstable; urgency=low

  * fix a /usr/doc problem in preinst; closes: #183491

 -- Adam Di Carlo <aph@debian.org>  Fri,  7 Mar 2003 13:53:18 -0500

doc-base (0.7.15) unstable; urgency=low

  * attempting to flush the easy bugs before the major rewrite...
  
  * don't set /usr/doc symlink, in fact, remove it in preinst if it is there
  * add #DEBHELPER# areas in maintainer scripts (thanks, linda)
  * postinst: don't variablize /usr/bin/update-menus, it confuses lintian
  * install lintian overrides for:
    doc-base: maintainer-script-does-not-check-for-existence-of-installdocs postinst
    doc-base: preinst-calls-installdocs
  * docs: update (c) date; s/command -v/which/; closes: #169115
  * install-docs: strip trailing space in fields that we read; 
    closes: #86040 and part of #60981
  * install-docs: improve the error message when we fail writing a dhelp
    file; closes: #111620
  * Section is now a required field, otherwise, we create invalid menu
    files; closes: #112450
  * doc-base.sgml: document document and format fields, indicating which
    fields are required; closes: #63822, #151945
  * install-docs: POD documentation improvements
  * postinst: don't create /usr/doc symlink

 -- Adam Di Carlo <aph@debian.org>  Sun,  2 Mar 2003 22:17:55 -0500

doc-base (0.7.14) unstable; urgency=low

  * fix a bug introduced in last version, thanks to bug hunting by 
    David Kimdon; closes: #171202
  * dhelp registration was busted in 0.7.13, so if we're upgrading from
    that version, take the time to reregister all docreg files

 -- Adam Di Carlo <aph@debian.org>  Sun,  1 Dec 2002 17:30:05 -0500

doc-base (0.7.13) unstable; urgency=low

  * documentation corrections and updates from Chris Tillman;
    closes: #130054
  * add --no-update-menus switch for more efficient bulk invocation, and
    rewrite postinst to use that, so we end up calling update-menus only
    once; closes: #114886
  * postinst: don't re-register all doc-base files if they don't need
    re-registering
  * install-docs: less cryptic arg processing warnings
  * if you want to re-register all doc-base files, just purge and install
    the package; closes: #97009
  * remove old FSSTD stuff in documentation; closes: #146226
  * remove old FSSTD stuff in dhelp support; closes: #127985

 -- Adam Di Carlo <aph@debian.org>  Tue, 26 Nov 2002 14:25:40 -0500

doc-base (0.7.12) unstable; urgency=low

  * deal with problems when locale is UTF-8, patch from Drew Parsons
    closes: #158624, #163188, #165312
  * embarrassing: doc-base's own doc-base file was a bit wrong
    closes: #137514
  * slight postinst message change

  * note: many more changes coming; I'm just trying to close any easy and
    gratuitous bugs here while I'm working on the redesign

 -- Adam Di Carlo <aph@debian.org>  Mon, 25 Nov 2002 13:36:24 -0500

doc-base (0.7.11) unstable; urgency=low

  * incorporate NMU (closes: #111703, #114657)
  * strengthen the wording of the prerm case -- for people getting 
      dpkg: warning - unable to delete old file `directory': Directory not empty
    due to old .dhelp files, please read section 2.4
    (closes: #59850)
  * some other minor updates in the documentation
  * debian/control: upgrade to standards version to 3.5.6, no changes
    needed 

    - Note that the stipulation that programs cannot reference files in
      /usr/share/doc [13.3] is not honored because that is required by
      dhelp; complaints about that should be directed towards dhelp.

 -- Adam Di Carlo <aph@debian.org>  Sun, 21 Oct 2001 01:38:04 -0400

doc-base (0.7.10.1) unstable; urgency=medium

  * Non-maintainer upload.
  * Quote control file names for regexps (closes: #111703).

 -- Colin Watson <cjwatson@debian.org>  Sat,  6 Oct 2001 13:06:59 +0100

doc-base (0.7.10) unstable; urgency=low

  * clarify wording when unregistering documentation
  * postrm works better when it's actually installed into the deb, duh
    really closes: #101252
  
 -- Adam Di Carlo <aph@debian.org>  Mon, 30 Jul 2001 02:11:12 -0400

doc-base (0.7.9) unstable; urgency=low

  * process doc-base files present already at configure time
    closes: #39006
  * conversely, remove all our files (nicely) at remove time, and purge
    /var/lib/doc-base at purge time
    closes: #101252
  * get our perl depends right, using dh_perl (required build-depends on
    debhelper)
    closes: #67171
  * fix a minor usr/doc vs usr/share/doc problem in the man page
    closes: #81126
  * fix for new license location in copyright file
  * in the documentation, we weren't noting the date properly based on the
    Debian changelogs
  * fixed a while ago:
    closes: #62230

 -- Adam Di Carlo <aph@debian.org>  Mon, 30 Jul 2001 01:56:07 -0400

doc-base (0.7.8) frozen unstable; urgency=low

  * small changes for bugfixing, no new features, should go in potato
  * install-docs: if open of control file fails, look for file in
    /usr/share/doc-base/ (closes: Bug#53555)
  * update to Policy standards 3.1.1 -- added Build-Depends-Indep
    (closes: Bug#53261)
  * tweak preinst wording as it removes old .dhelp files 
    (closes: Bug#47010)
  * doc-base.sgml: use version.ent for dynamic versioning (shipped too);
    SGML aesthetics and tagging

 -- Adam Di Carlo <aph@debian.org>  Tue,  8 Feb 2000 20:07:16 -0500

doc-base (0.7.7) unstable; urgency=low

  * really update Policy standards to 3.0.1
  * dhelp now has a different program, dhelp_parse_fsstnd, to deal with
    /usr/doc vs /usr/share/doc, so use it
  * debian/control: conflict with dhelp (<< 0.3.14)
  * prerm, postinst: implement tech committe solution on /usr/doc symlink

 -- Adam Di Carlo <aph@debian.org>  Sat, 25 Sep 1999 16:34:11 -0400

doc-base (0.7.6) unstable; urgency=low

  * add perl5 depends (closes: Bug#44623)

 -- Adam Di Carlo <aph@debian.org>  Fri, 10 Sep 1999 21:37:01 -0400

doc-base (0.7.5) unstable; urgency=low

  * update Policy standards to 3.0.1
  * debian/rules: move documentation area back to /usr/doc for now;
    clean is a bit cleaner
  * maintainer scripts: simplify a bit; call 'install-docs -r' from
    preinst for upgrade from 0.7.4 (dir move) to avoid the dpkg warning
    (closes Bug#41785, #41161, #41326)
  * install-docs: prior to installing new docreg file, remove any already
    installed dhelp files -- this will help with the /usr/doc ->
    /usr/share/doc transition, although it won't suppress the dpkg
    warning, since 'install-docs -i' runs *after* the warning
  * doc-base.sgml: talk about how to avoid the dpkg warning about
    'Directory not empty' due to .dhelp file left around during upgrade;
    the solution in short is to run 'install-docs -r' during 'upgrade' in
    prerm

 -- Adam Di Carlo <aph@debian.org>  Sat, 14 Aug 1999 21:32:55 -0400

doc-base (0.7.4) unstable; urgency=low

  * install-docs: skip dhelp when directory != /usr/doc or 
    /usr/share/doc (closes Bug#32034)
  * changes for Policy 3.0.0 (no /usr/doc compat symlinks)
  * debian/control: removed perl-base dependancy -- it's required!
    (thanks to Raphael Hertzog)

 -- Adam Di Carlo <aph@debian.org>  Sat, 10 Jul 1999 21:45:41 -0400

doc-base (0.7.3) unstable; urgency=low

  * doc-base.sgml: fix typo (closes Bug#35986)
  * install-docs: only warn about unknown formats if verbose ('-v') is in
    effect (closes Bug#33509, Bug#35947, and hopefully quells the recent
    outcry on debian-devel)
  * debian/rules: debiandoc2text now has a default extension of .txt,
    which is better anyway, so use that

 -- Adam Di Carlo <aph@debian.org>  Thu, 13 May 1999 01:25:06 -0400

doc-base (0.7.2) frozen unstable; urgency=low

  * maintainer name change
  * debian/rules: more robust way to interact with changelog, which is
    what I use on all my other packages
  * install-docs: fix some glitches in the POD output
  * doc-base.sgml: minor typo in documentation fixed (closes Bug#26530)
  * debian/control: suggests 'dwww | dhelp', without which the package
    currently isn't much good (closes Bug#31302)
  * no code changes

 -- Adam Di Carlo <aph@debian.org>  Sat,  2 Jan 1999 04:38:30 -0500

doc-base (0.7.1) frozen unstable; urgency=low (HIGH if you have problems
    with quotes in document registration files)

  * depend on recent Perl (closes Bug#21816)
  * set umask explictly, so all files are -rw-r--r-- (closes Bug#22275)
  * quote quotes for dwww-menu files (closes grave Bug#22990)

 -- Adam P. Harris <aph@debian.org>  Mon,  1 Jun 1998 01:49:50 -0400

doc-base (0.7.0) frozen unstable; urgency=low

  * maintainer scripts: one of the shell function used '-', which was
    renamed to '_'; shell for maintainer scripts set back to /bin/sh
  * doc-base.sgml: update the FSF address
  * copyright: list myself as maintainer
  * bump standards version to 2.4.1.0 (checked)
  * add digit to version number: 0.7.x will be for hamm maintenance
    (branched); probably 0.8 will be for our documentation drafts
    including information on the Debian Document Hierarchy, the new docreg 
    file format documentation and system, and other documents; 0.9 will
    probalby contain our implementations of these new infrastructures for
    slink; and eventually it'll all be a done deal and we'll hit 1.0. 

 -- Adam P. Harris <aph@debian.org>  Sun,  3 May 1998 09:05:23 -0400

doc-base (0.6) frozen unstable; urgency=low

  * change shell on maintainer scripts to bash, since that seems to cope
    with the shell functions better (closes Bug#21359, and undoubtedly
    more reports to come until this makes it into the archive)

 -- Adam P. Harris <aph@debian.org>  Sun, 19 Apr 1998 01:54:36 -0400

doc-base (0.5) frozen unstable; urgency=low

  * fix minor problems with the new install-docs-man document id, the
    document id was misnamed install-doc-man
  * improve the maintainer scripts immensely, trying to minimize removal,
    since it's not necessary to remove a document id when replacing it
  * doc-base.sgml: update TODO list

 -- Adam P. Harris <aph@debian.org>  Fri, 17 Apr 1998 01:17:06 -0400

doc-base (0.4) frozen unstable; urgency=low

  * much better dhelp support: be sure to run 'dhelp_parse -d' before
    altering a .dhelp file, multiple <item>s in one .dhelp file, and very
    good parsing of existing .dhelp files in case more than one
    document-id is adding a files in the same directory (closes
    Bug#18808, Bug#20038, Bug#20529)
  * we now will modify even foreign .dhelp files
  * lowercase sections for dhelp (only), and remove leading 'Apps/', which
    is a workaround until we have a real, policy-specified and thought-out
    documentation hierarchy (closes Bug#20862)
  * register install-docs man page, html version
  * moved Section for our own documentation from Apps/Programming to
    Debian

 -- Adam P. Harris <aph@debian.org>  Thu, 16 Apr 1998 06:27:08 -0400

doc-base (0.3) frozen unstable; urgency=low

  * add manual page for install-docs
  * debian/rules: clarifications and cleanup
  * added frozen to distribution ("oopsie" on last version)
  * install-docs is idempotent for --remove, that is, if you try to remove
    a docid which is already removed, it exits with a warning, but not a
    non-zero exit status (closes Bug#19875, I think)

 -- Adam P. Harris <aph@debian.org>  Thu,  9 Apr 1998 20:36:00 -0400

doc-base (0.2) unstable; urgency=low

  * new maintainer
  * clarify how to call install-docs in documentation (closes Bug#20530)
  * practice what I preach in maintainer scripts
  * debian/rules: call dpkg-gencontrol with -isp
  * copyright: update FSF address
  * actively fixing rest of bugs and lack of man page, patience please

 -- Adam P. Harris <aph@debian.org>  Mon,  6 Apr 1998 07:31:21 -0400

doc-base (0.1) unstable; urgency=low

  * Initial Release.
  * Only supports registering documents to the online documentation
    systems dwww and dhelp for now.

 -- Christian Schwarz <schwarz@debian.org>  Fri, 30 Jan 1998 21:38:45 +0100

